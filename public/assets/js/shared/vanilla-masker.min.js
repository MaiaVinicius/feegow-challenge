!function(e,t){"function"==typeof define&&define.amd?define(t):e.VMasker=t()}(this,function(){var e=[8,9,16,17,18,36,37,38,39,40,91,92,93],t=function(t){for(var n=0,i=e.length;i>n;n++)if(t==e[n])return!1;return!0},n=function(e){return(e={precision:(e=e||{}).hasOwnProperty("precision")?e.precision:2,separator:e.separator||",",delimiter:e.delimiter||".",unit:e.unit&&e.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:e.suffixUnit&&" "+e.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:e.zeroCents,lastOutput:e.lastOutput}).moneyPrecision=e.zeroCents?0:e.precision,e},i=function(e){this.elements=e};i.prototype.unbindElementToMask=function(){for(var e=0,t=this.elements.length;t>e;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=!1,this.elements[e].onkeydown=!1,this.elements[e].value.length&&(this.elements[e].value=this.elements[e].value.replace(/\D/g,""))},i.prototype.bindElementToMask=function(e){for(var n=this,i=function(i){var r=(i=i||window.event).target||i.srcElement;t(i.keyCode)&&setTimeout(function(){n.opts.lastOutput=r.lastOutput,r.value=s[e](r.value,n.opts),r.lastOutput=r.value,r.setSelectionRange&&n.opts.suffixUnit&&r.setSelectionRange(r.value.length,r.value.length-n.opts.suffixUnit.length)},0)},r=0,o=this.elements.length;o>r;r++)this.elements[r].lastOutput="",this.elements[r].onkeyup=i,this.elements[r].value.length&&(this.elements[r].value=s[e](this.elements[r].value,this.opts))},i.prototype.maskMoney=function(e){this.opts=n(e),this.bindElementToMask("toMoney")},i.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},i.prototype.maskPattern=function(e){this.opts={pattern:e},this.bindElementToMask("toPattern")},i.prototype.unMask=function(){this.unbindElementToMask()};var s=function(e){if(!e)throw new Error("VanillaMasker: There is no element to bind.");var t="length"in e?e.length?e:[]:[e];return new i(t)};return s.toMoney=function(e,t){if((t=n(t)).zeroCents){t.lastOutput=t.lastOutput||"";var i="("+t.separator+"[0]{0,"+t.precision+"})",s=new RegExp(i,"g"),r=e.toString().replace(/[\D]/g,"").length||0,o=t.lastOutput.toString().replace(/[\D]/g,"").length||0;e=e.toString().replace(s,""),o>r&&(e=e.slice(0,e.length-1))}for(var l=e.toString().replace(/[\D]/g,""),a=new RegExp("^(0|\\"+t.delimiter+")"),u=new RegExp("(\\"+t.separator+")$"),p=l.substr(0,l.length-t.moneyPrecision),h=p.substr(0,p.length%3),c=new Array(t.precision+1).join("0"),g=0,f=(p=p.substr(p.length%3,p.length)).length;f>g;g++)g%3==0&&(h+=t.delimiter),h+=p[g];if(h=(h=h.replace(a,"")).length?h:"0",!t.zeroCents){var m=l.length-t.precision,v=l.substr(m,t.precision),y=v.length,d=t.precision>y?t.precision:y;c=(c+v).slice(-d)}return(t.unit+h+t.separator+c+t.suffixUnit).replace(u,"")},s.toPattern=function(e,t){var n,i="object"==typeof t?t.pattern:t,s=i.replace(/\W/g,""),r=i.split(""),o=e.toString().replace(/\W/g,""),l=o.replace(/\W/g,""),a=0,u=r.length;for(n=0;u>n;n++){if(a>=o.length){if(s.length==l.length)return r.join("");break}"9"===r[n]&&o[a].match(/[0-9]/)||"A"===r[n]&&o[a].match(/[a-zA-Z]/)||"S"===r[n]&&o[a].match(/[0-9a-zA-Z]/)?r[n]=o[a++]:("9"===r[n]||"A"===r[n]||"S"===r[n])&&(r=r.slice(0,n))}return r.join("").substr(0,n)},s.toNumber=function(e){return e.toString().replace(/(?!^-)[^0-9]/g,"")},s});